plugins {
    id 'java'
    id 'java-library'
    id 'com.github.johnrengelman.shadow'
    id 'application'
}

group 'com.fshows.fubei'
<<<<<<< HEAD
version '1.0.2-SNAPSHOT'
=======
version '1.0-SNAPSHOT'
mainClassName = 'com.fshows.fubei.FubeiOpenApi'
>>>>>>> 2ec354511a252daebd97b9d96baeaca564c91e86

repositories {
    mavenCentral()
}

dependencies {
    testCompile group: 'junit', name: 'junit', version: '4.12'
}

shadowJar {
    baseName = 'fubei-openapi-legacy'
    classifier = ''
    version = '1.0.0'
    manifest {
        inheritFrom project.tasks.jar.manifest
    }
    configurations = [project.configurations.compile]
//    dependencies {
//        include(dependency('com.google.guava:guava:26.0-jre'))
//        include(dependency('com.alibaba:fastjson:1.2.31'))
//        include(dependency('com.annimon:stream:1.2.1'))
//        include(dependency('com.squareup.retrofit2:retrofit:2.6.0'))
//        include(dependency('com.squareup.okhttp3:logging-interceptor:3.14.2'))
//        include(dependency('org.slf4j:slf4j-api:1.7.26'))
//        include(dependency('org.slf4j:slf4j-simple:1.7.26'))
//    }
}

publishing {
    publications {
        maven(MavenPublication) {
            println "${project.group}:${project.name}:${project.version}"
            groupId project.group
            artifactId project.name
            version project.version
            //若是war包，就写components.web,若是jar包，就写components.java
            from components.java
        }
    }
}

jar {
    exclude 'META-INF/*.SF', 'META-INF/*.DSA', 'META-INF/*.RSA', 'META-INF/*.MF'
    manifest {
        attributes(
                'Main-Class': 'com.fshows.fubei.FubeiOpenApi',
                'Class-Path': configurations.compile.files.collect { "lib/$it.name" }.join(' ')
        )
    }
}

